// ==========================================
// Composite Build用 ルートプロジェクト設定
// backendプロジェクトのタスクをルートから実行可能にする
// ==========================================

// ビルド成果物の削除
tasks.register("clean") {
    group = "build"
    description = "Cleans backend build outputs"
    dependsOn gradle.includedBuild("backend").task(":clean")
}

// Javaソースとリソースのコンパイル
tasks.register("compile") {
    group = "build" 
    description = "Compiles backend application"
    dependsOn gradle.includedBuild("backend").task(":classes")
}

// 単体テストの実行
tasks.register("test") {
    group = "verification"
    description = "Runs backend tests"
    dependsOn gradle.includedBuild("backend").task(":test")
}

// テストなしでの実行可能JARファイル作成（ローカル, railway用）
tasks.register("build") {
    group = "build"
    description = "Builds backend application without tests"
    dependsOn gradle.includedBuild("backend").task(":bootJar")
}